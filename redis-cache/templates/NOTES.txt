Redis Cache ha sido desplegado exitosamente.

Release: {{ .Release.Name }}
Namespace: {{ .Release.Namespace }}

Para conectarse a Redis:

1. Desde dentro del cluster:
   
   Host: {{ include "redis-cache.fullname" . }}.{{ .Release.Namespace }}.svc.cluster.local
   Port: {{ .Values.service.port }}
   {{- if .Values.auth.enabled }}
   Password: (obtener del secret)
   {{- end }}

2. Obtener la contrasena de Redis:
   
   {{- if .Values.auth.enabled }}
   export REDIS_PASSWORD=$(kubectl get secret --namespace {{ .Release.Namespace }} {{ include "redis-cache.secretName" . }} -o jsonpath="{.data.{{ .Values.auth.existingSecretPasswordKey }}}" | base64 -d)
   echo $REDIS_PASSWORD
   {{- end }}

3. Conectarse usando redis-cli:
   
   kubectl run --namespace {{ .Release.Namespace }} redis-client --rm --tty -i --restart='Never' \
     --image {{ .Values.image.repository }}:{{ .Values.image.tag | default .Chart.AppVersion }} \
     -- redis-cli -h {{ include "redis-cache.fullname" . }} -p {{ .Values.service.port }} {{- if .Values.auth.enabled }} -a $REDIS_PASSWORD{{- end }}

4. Port-forward para acceso local:
   
   kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ include "redis-cache.fullname" . }} 6379:{{ .Values.service.port }}

   Luego conectate localmente:
   redis-cli -h 127.0.0.1 -p 6379{{- if .Values.auth.enabled }} -a $REDIS_PASSWORD{{- end }}

Comandos utiles:

  Ver estado del StatefulSet:
    kubectl get statefulset -n {{ .Release.Namespace }} {{ include "redis-cache.fullname" . }}

  Ver pods:
    kubectl get pods -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}

  Ver logs:
    kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }} -f

  {{- if .Values.metrics.enabled }}
  
  Metricas disponibles en:
    http://{{ include "redis-cache.fullname" . }}.{{ .Release.Namespace }}.svc.cluster.local:{{ .Values.metrics.port }}/metrics
  {{- end }}

  {{- if .Values.persistence.enabled }}
  
  Verificar PersistentVolumeClaim:
    kubectl get pvc -n {{ .Release.Namespace }}
  {{- end }}
